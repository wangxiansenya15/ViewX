# 🗺️ ViewX 项目开发路线图 (Project Roadmap)

> **最后更新时间**: 2025-12-02
> **当前版本**: v0.6.0 (Beta)

本文档旨在规划 ViewX 视频平台的完整开发路径，追踪当前进度，并明确后续的开发重点。

---

## 📊 进度概览

| 模块 | 状态 | 进度说明 |
| :--- | :---: | :--- |
| **基础设施** | ✅ 100% | 数据库、缓存、消息队列、异常处理、配置管理已就绪 |
| **用户系统** | ✅ 95% | 注册登录、OAuth2、JWT黑名单、权限控制、头像上传已完成 |
| **视频核心** | 🚧 60% | 数据模型优化完成，上传/转码/存储待完善 |
| **社交交互** | ✅ 85% | 点赞/收藏/评论/异步通知已完成 |
| **AI & 推荐** | 🚧 40% | 基础AI接入、向量搜索已完成，个性化推荐算法待开发 |
| **前端对接** | 🚧 30% | 用户认证、个人资料页面已完成，视频模块待开发 |

---

## 📅 详细路线图

### 第一阶段：地基与核心架构 (Phase 1: Foundation)
**目标**: 搭建稳固的后端架构，实现用户管理和基础服务。

- [x] **项目初始化**
    - [x] Spring Boot 工程搭建
    - [x] 目录结构规范化 (Controller/Service/Dao/Pojo)
    - [x] 多环境配置 (dev/prod)
- [x] **数据存储层**
    - [x] PostgreSQL 数据库设计与建表
    - [x] MyBatis-Plus 集成与配置 (分页、自动填充、乐观锁)
    - [x] Redis 缓存集成
    - [x] **[NEW]** 数据库软删除支持 (Soft Delete)
    - [x] **[NEW]** DTO/VO 三层架构重构
- [x] **用户认证与安全**
    - [x] Spring Security + JWT 认证体系
    - [x] 邮箱/密码 注册与登录
    - [x] OAuth2 第三方登录框架 (GitHub 已集成)
    - [x] 统一异常处理 (GlobalExceptionHandler)
    - [x] **[NEW]** JWT Token 黑名单机制（Redis）
    - [x] **[NEW]** 用户资料管理（查看/编辑）
    - [x] **[NEW]** 头像上传功能（本地存储策略）
    - [x] **[NEW]** 角色权限控制（RBAC）

### 第二阶段：视频内容核心 (Phase 2: Content Core)
**目标**: 实现视频的上传、处理、存储和元数据管理。

- [x] **视频数据模型**
    - [x] 视频表结构设计 (支持 AI 标签、向量字段)
    - [x] 视频 DTO/VO 定义
- [ ] **视频上传与处理**
    - [ ] 文件上传接口 (支持断点续传/分片上传)
    - [ ] 对象存储集成 (MinIO / Aliyun OSS)
    - [ ] 视频转码服务 (FFmpeg / 云转码)
    - [ ] 封面图自动截取
- [ ] **视频播放**
    - [ ] 视频流媒体接口 (HLS/DASH 支持)
    - [ ] 播放统计 (观看次数、时长)

### 第三阶段：社交与互动 (Phase 3: Social & Interaction)
**目标**: 增强用户粘性，实现社区功能。

- [x] **交互功能**
    - [x] 视频点赞 / 取消点赞
    - [x] 视频收藏 / 取消收藏
    - [x] 评论系统 (数据库设计支持嵌套回复)
- [x] **异步处理架构**
    - [x] RabbitMQ 消息队列集成
    - [x] 异步写入交互数据 (削峰填谷)
    - [x] 用户行为日志记录 (ActionLog)
- [x] **通知系统**
    - [x] 站内信通知模型
    - [x] 异步消息触发通知 (点赞/评论通知)

### 第四阶段：AI 智能与推荐 (Phase 4: AI & Recommendation)
**目标**: 利用 AI 技术提升内容理解和分发效率。

- [x] **AI 基础设施**
    - [x] AI Service 接入 (兼容 OpenAI 接口)
    - [x] PostgreSQL `pgvector` 向量扩展支持
- [x] **内容理解**
    - [x] 视频内容自动摘要
    - [x] 自动生成标签 (Tags)
    - [x] 情感分析
- [ ] **智能搜索与推荐**
    - [x] 语义搜索 (基于向量相似度)
    - [ ] 混合搜索 (关键词 + 语义)
    - [ ] **[核心]** 个性化推荐算法 (基于协同过滤 + 内容推荐)
    - [ ] 热门视频推荐 (Trending)

### 第五阶段：运营与运维 (Phase 5: Operations & DevOps)
**目标**: 系统的稳定性、可观测性和商业化准备。

- [ ] **可观测性**
    - [ ] 日志链路追踪 (SkyWalking / Zipkin)
    - [ ] 系统监控 (Prometheus + Grafana)
- [ ] **高级功能**
    - [ ] 创作者中心 (数据分析仪表盘)
    - [ ] 视频审核机制 (人工 + AI)
    - [ ] 广告与会员系统 (预留)
- [ ] **部署**
    - [ ] Docker 容器化
    - [ ] CI/CD 流水线

---

## 🚀 当前待办事项 (Current To-Do List)

### 🔴 高优先级 (High Priority)
1.  **完善视频上传流程**: 目前仅有数据库模型，急需实现文件上传到 OSS 及基础转码逻辑。
2.  **实现评论业务逻辑**: 数据库和实体类已就绪，需要实现 `CommentService` 中的发布、回复、查询树形评论列表逻辑。
3.  **对接前端视频模块**: 完成视频列表、播放页面的前后端联调。

### 🟡 中优先级 (Medium Priority)
1.  **完善 AI 推荐算法**: 目前仅有基础结构，需要编写具体的推荐策略代码。
2.  **Gitee/Google 登录**: 根据需要恢复或添加更多 OAuth2 源。
3.  **前端 UI 优化**: 提升用户体验，添加动画效果。

### 🟢 低优先级 (Low Priority)
1.  **弹幕系统**: 考虑后期加入。
2.  **直播功能**: 长期规划。

### ✅ 最近完成 (Recently Completed)
- ✅ JWT Token 黑名单机制（防止已登出 Token 继续使用）
- ✅ 用户资料查看和编辑功能
- ✅ 头像上传功能（本地存储 + 自动清理旧头像）
- ✅ 角色权限控制（只有本人/管理员可修改资料）
- ✅ 前端个人资料页面（Profile.vue）
- ✅ 导航栏用户信息动态显示

---

## 📝 架构演进记录

- **v0.1**: 单体架构，基础 CRUD。
- **v0.3**: 引入 Redis 缓存和 RabbitMQ 异步解耦。
- **v0.4**: 引入 AI 服务和向量数据库。
- **v0.5**: (当前) 数据层重构 (DTO/VO/Entity)，软删除支持，配置解耦。

---
*本文档将随项目迭代持续更新。*
