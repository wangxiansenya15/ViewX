# ========================================
# Redis 缓存配置优化
# ========================================

spring:
  cache:
    type: redis
    redis:
      # 缓存过期时间配置
      time-to-live: 3600000  # 默认1小时 (毫秒)
      # 缓存键前缀
      key-prefix: "viewx:"
      # 是否缓存空值（防止缓存穿透）
      cache-null-values: true
      # 是否使用键前缀
      use-key-prefix: true

  # Redis 连接池配置
  data:
    redis:
      lettuce:
        pool:
          # 最大连接数
          max-active: 8
          # 最大空闲连接
          max-idle: 8
          # 最小空闲连接
          min-idle: 2
          # 连接池最大阻塞等待时间（毫秒）
          max-wait: 3000

# ========================================
# 自定义缓存配置
# ========================================
cache:
  configs:
    # 用户名检查缓存配置
    username-check:
      # 缓存时间：10分钟（对于存在的用户名）
      ttl: 600
      # 对于不存在的用户名，缓存时间更短（1分钟）
      # 因为可能很快被注册
      ttl-if-absent: 60
